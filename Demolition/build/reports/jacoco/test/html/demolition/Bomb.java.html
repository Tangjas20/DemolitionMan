<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Bomb.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Demolition</a> &gt; <a href="index.source.html" class="el_package">demolition</a> &gt; <span class="el_source">Bomb.java</span></div><h1>Bomb.java</h1><pre class="source lang-java linenums">package demolition;

import processing.core.PImage;
import processing.core.PApplet;
import java.util.Arrays;

public class Bomb extends GameObject {
    private String[][] currentBoard;
<span class="fc" id="L9">    private PImage[] bombSprite = new PImage[8];</span>
<span class="fc" id="L10">    private PImage[] explosionSprite = new PImage[7];</span>
<span class="fc" id="L11">    private int[] explodablePath = {0, 0, 0, 0};</span>
    boolean explosionFinished;
    private int timerSprite;
    private int currentSprite;
    private boolean isAlive;
<span class="fc" id="L16">    boolean killedPlayer = false;</span>
<span class="fc" id="L17">    boolean killedYellowEnemy = false;</span>
<span class="fc" id="L18">    boolean killedRedEnemy = false;</span>


    public Bomb(int x, int y, PApplet app, String[][] currentBoard){
<span class="fc" id="L22">        super(x, y, app);</span>
<span class="fc" id="L23">        this.currentBoard = currentBoard;</span>

<span class="fc" id="L25">        this.bombSprite[0] = app.loadImage(&quot;src/main/resources/bomb/bomb1.png&quot;);</span>
<span class="fc" id="L26">        this.bombSprite[1] = app.loadImage(&quot;src/main/resources/bomb/bomb2.png&quot;);</span>
<span class="fc" id="L27">        this.bombSprite[2] = app.loadImage(&quot;src/main/resources/bomb/bomb3.png&quot;);</span>
<span class="fc" id="L28">        this.bombSprite[3] = app.loadImage(&quot;src/main/resources/bomb/bomb4.png&quot;);</span>
<span class="fc" id="L29">        this.bombSprite[4] = app.loadImage(&quot;src/main/resources/bomb/bomb5.png&quot;);</span>
<span class="fc" id="L30">        this.bombSprite[5] = app.loadImage(&quot;src/main/resources/bomb/bomb6.png&quot;);</span>
<span class="fc" id="L31">        this.bombSprite[6] = app.loadImage(&quot;src/main/resources/bomb/bomb7.png&quot;);</span>
<span class="fc" id="L32">        this.bombSprite[7] = app.loadImage(&quot;src/main/resources/bomb/bomb8.png&quot;);</span>

        
<span class="fc" id="L35">        this.explosionSprite[0] = app.loadImage(&quot;src/main/resources/explosion/centre.png&quot;);</span>
<span class="fc" id="L36">        this.explosionSprite[1] = app.loadImage(&quot;src/main/resources/explosion/horizontal.png&quot;);</span>
<span class="fc" id="L37">        this.explosionSprite[2] = app.loadImage(&quot;src/main/resources/explosion/vertical.png&quot;);</span>
<span class="fc" id="L38">        this.explosionSprite[3] = app.loadImage(&quot;src/main/resources/explosion/end_top.png&quot;);</span>
<span class="fc" id="L39">        this.explosionSprite[4] = app.loadImage(&quot;src/main/resources/explosion/end_right.png&quot;);</span>
<span class="fc" id="L40">        this.explosionSprite[5] = app.loadImage(&quot;src/main/resources/explosion/end_bottom.png&quot;);</span>
<span class="fc" id="L41">        this.explosionSprite[6] = app.loadImage(&quot;src/main/resources/explosion/end_left.png&quot;);</span>

<span class="fc" id="L43">        this.currentSprite = 0;</span>
<span class="fc" id="L44">        this.timerSprite = 0;</span>
<span class="fc" id="L45">        this.isAlive = true;</span>
<span class="fc" id="L46">        this.explosionFinished = false;</span>
<span class="fc" id="L47">        setCanExplodePath();</span>
<span class="fc" id="L48">    }</span>

    public void setCanExplodePath(){
<span class="pc bpc" id="L51" title="1 of 2 branches missed.">        if(this.currentBoard[y][x+1].equals(&quot;W&quot;)){</span>
            ;
        }//Right
<span class="fc bfc" id="L54" title="All 2 branches covered.">        else if(this.currentBoard[y][x+1].matches(&quot; |R|Y|P&quot;)){</span>
<span class="fc" id="L55">            explodablePath[3] ++;</span>
<span class="fc bfc" id="L56" title="All 2 branches covered.">            if(this.currentBoard[y][x+2].matches(&quot; |R|Y|P|B&quot;)){</span>
<span class="fc" id="L57">                explodablePath[3] ++;</span>
            }
        }
<span class="pc bpc" id="L60" title="1 of 2 branches missed.">        else if(this.currentBoard[y][x+1].equals(&quot;B&quot;)){</span>
<span class="fc" id="L61">                explodablePath[3] += 3;</span>
            }
        //Left
<span class="pc bpc" id="L64" title="1 of 2 branches missed.">        if(this.currentBoard[y][x-1].equals(&quot;W&quot;)){</span>
            ;
        }
<span class="fc bfc" id="L67" title="All 2 branches covered.">        else if(this.currentBoard[y][x-1].matches(&quot; |R|Y|P&quot;)){</span>
<span class="fc" id="L68">            explodablePath[0] ++;</span>
<span class="fc bfc" id="L69" title="All 2 branches covered.">            if(this.currentBoard[y][x-2].matches(&quot; |R|Y|P|B&quot;)){</span>
<span class="fc" id="L70">                explodablePath[0] ++;</span>
            }
        }
<span class="fc bfc" id="L73" title="All 2 branches covered.">        else if(this.currentBoard[y][x-1].equals(&quot;B&quot;)){</span>
<span class="fc" id="L74">                explodablePath[0] += 3;</span>
            }
        //DOWN
<span class="pc bpc" id="L77" title="1 of 2 branches missed.">        if(this.currentBoard[y+1][x].equals(&quot;W&quot;)){</span>
            ;
        }
<span class="pc bpc" id="L80" title="1 of 2 branches missed.">        else if(this.currentBoard[y+1][x].matches(&quot; |R|Y|P&quot;)){</span>
<span class="fc" id="L81">            explodablePath[2] ++;</span>
<span class="fc bfc" id="L82" title="All 2 branches covered.">            if(this.currentBoard[y+2][x].matches(&quot; |R|Y|P|B&quot;)){</span>
<span class="fc" id="L83">                explodablePath[2] ++;</span>
            }
        }
<span class="nc bnc" id="L86" title="All 2 branches missed.">        else if(this.currentBoard[y+1][x].equals(&quot;B&quot;)){</span>
<span class="nc" id="L87">                explodablePath[2] += 3;</span>
            }
        //UP
<span class="fc bfc" id="L90" title="All 2 branches covered.">        if(this.currentBoard[y-1][x].equals(&quot;W&quot;)){</span>
            ;
        }
<span class="pc bpc" id="L93" title="1 of 2 branches missed.">        else if(this.currentBoard[y-1][x].matches(&quot; |R|Y|P&quot;)){</span>
<span class="fc" id="L94">            explodablePath[1] ++;</span>
<span class="fc bfc" id="L95" title="All 2 branches covered.">            if(this.currentBoard[y-2][x].matches(&quot; |R|Y|P|B&quot;)){</span>
<span class="fc" id="L96">                explodablePath[1] ++;</span>
            }
        }
<span class="nc bnc" id="L99" title="All 2 branches missed.">        else if(this.currentBoard[y-1][x].equals(&quot;B&quot;)){</span>
<span class="nc" id="L100">                explodablePath[1] += 3;</span>
            }
        
<span class="fc" id="L103">        this.explodablePath = explodablePath;</span>
<span class="fc" id="L104">    }</span>
    
    public void drawExplosion(PApplet app) {//Left
<span class="fc" id="L107">        app.image(explosionSprite[0], this.x*32, this.y*32+64);</span>
<span class="pc bpc" id="L108" title="2 of 4 branches missed.">        if (explodablePath[0] == 1 || explodablePath[0] == 3) app.image(explosionSprite[6], this.x*32-32, this.y*32+64); //Left Close</span>
<span class="pc bpc" id="L109" title="1 of 2 branches missed.">        else if (explodablePath[0] == 2) {//Left Far</span>
<span class="nc" id="L110">            app.image(explosionSprite[1], this.x*32-32, this.y*32+64);</span>
<span class="nc" id="L111">            app.image(explosionSprite[6], this.x*32-64, this.y*32+64);</span>
        }
        //UP
<span class="pc bpc" id="L114" title="2 of 4 branches missed.">        if (explodablePath[1] == 1 || explodablePath[1] == 3) app.image(explosionSprite[3], this.x*32, this.y*32+64-32);</span>
<span class="pc bpc" id="L115" title="1 of 2 branches missed.">        else if (explodablePath[1] == 2) {</span>
<span class="fc" id="L116">            app.image(explosionSprite[2], this.x*32, this.y*32+64-32);</span>
<span class="fc" id="L117">            app.image(explosionSprite[3], this.x*32, this.y*32+64-64);</span>
        }//DOWN
<span class="pc bpc" id="L119" title="2 of 4 branches missed.">        if (explodablePath[2] == 1 || explodablePath[2] == 3) app.image(explosionSprite[5], this.x*32, this.y*32+64+32);</span>
<span class="pc bpc" id="L120" title="1 of 2 branches missed.">        else if (explodablePath[2] == 2) {</span>
<span class="fc" id="L121">            app.image(explosionSprite[2], this.x*32, this.y*32+32+64);</span>
<span class="fc" id="L122">            app.image(explosionSprite[5], this.x*32, this.y*32+64+64);</span>
        }//RIGHT
<span class="pc bpc" id="L124" title="2 of 4 branches missed.">        if (explodablePath[3] == 1 || explodablePath[3] == 3) app.image(explosionSprite[4], this.x*32+32, this.y*32+64);</span>
<span class="pc bpc" id="L125" title="1 of 2 branches missed.">        else if (explodablePath[3] == 2) {</span>
<span class="fc" id="L126">            app.image(explosionSprite[1], this.x*32+32, this.y*32+64);</span>
<span class="fc" id="L127">            app.image(explosionSprite[4], this.x*32+64, this.y*32+64);</span>
        }
<span class="fc" id="L129">        timerSprite += 1;</span>
<span class="fc bfc" id="L130" title="All 2 branches covered.">        if (timerSprite == 30) {</span>
<span class="fc" id="L131">            this.explosionFinished = true;</span>
        }
<span class="fc" id="L133">    }</span>

    public void draw(PApplet app) {
<span class="nc" id="L136">        app.image(bombSprite[currentSprite], this.x*32, this.y*32+64);</span>
<span class="nc" id="L137">        timerSprite += 1;</span>

<span class="nc bnc" id="L139" title="All 2 branches missed.">        if(timerSprite == 15) {</span>
<span class="nc" id="L140">            timerSprite = 0;</span>
<span class="nc" id="L141">            currentSprite += 1;</span>
<span class="nc bnc" id="L142" title="All 2 branches missed.">            if (currentSprite &gt; 7) {</span>
<span class="nc" id="L143">                currentSprite = 0;</span>
<span class="nc" id="L144">                this.isAlive = false;</span>
<span class="nc" id="L145">                timerSprite = 0;</span>
            }
        }

<span class="nc" id="L149">    }</span>

    public void explosion(App app) {
        //Left
<span class="fc bfc" id="L153" title="All 2 branches covered.">      if (explode(this.x-1, this.y, app)) </span>
<span class="fc" id="L154">            explode(this.x-2, this.y, app);</span>
      //Down
<span class="pc bpc" id="L156" title="1 of 2 branches missed.">      if (explode(this.x, this.y+1, app))</span>
<span class="fc" id="L157">            explode(this.x, this.y+2, app);</span>
      //Right
<span class="fc bfc" id="L159" title="All 2 branches covered.">      if (explode(this.x+1, this.y, app)) </span>
<span class="fc" id="L160">            explode(this.x+2, this.y, app);</span>
      //Up
<span class="fc bfc" id="L162" title="All 2 branches covered.">      if (explode(this.x, this.y-1, app)) </span>
<span class="fc" id="L163">            explode(this.x, this.y-2, app);</span>
            
<span class="pc bpc" id="L165" title="1 of 2 branches missed.">      if (explode(this.x, this.y, app));</span>
<span class="fc" id="L166">    }</span>

    public boolean explode(int row, int column, App app) {
<span class="fc" id="L169">        String tile = app.currentBoard[column][row];</span>

<span class="fc bfc" id="L171" title="All 2 branches covered.">        if (tile.equals(&quot; &quot;)) {</span>
<span class="fc" id="L172">          return true;</span>
<span class="fc bfc" id="L173" title="All 2 branches covered.">        } else if (tile.equals(&quot;B&quot;)) {</span>
<span class="fc" id="L174">            this.currentBoard[column][row] = &quot; &quot;;</span>
<span class="fc" id="L175">            return false;</span>

<span class="fc bfc" id="L177" title="All 2 branches covered.">        } else if (tile.equals(&quot;P&quot;)) {</span>
<span class="fc" id="L178">            killedPlayer = true;</span>
<span class="fc" id="L179">            return true;</span>

<span class="fc bfc" id="L181" title="All 2 branches covered.">        } else if (tile.equals(&quot;Y&quot;)) {</span>
<span class="fc" id="L182">            this.currentBoard[column][row] = &quot; &quot;;</span>
<span class="fc bfc" id="L183" title="All 2 branches covered.">            for(yellowEnemy i: app.board.yellowEnemyList){</span>
<span class="pc bpc" id="L184" title="3 of 4 branches missed.">                if(i.getX() == row &amp;&amp; i.getY() == column){</span>
<span class="nc" id="L185">                    i.isEnemyDead = true;</span>
                }
<span class="fc" id="L187">            }</span>
<span class="pc bpc" id="L188" title="1 of 2 branches missed.">            app.board.yellowEnemyList.removeIf(b -&gt; b.isEnemyDead == true);</span>
<span class="fc" id="L189">            killedYellowEnemy = true;</span>
<span class="fc" id="L190">            return true;</span>

<span class="fc bfc" id="L192" title="All 2 branches covered.">        } else if (tile.equals(&quot;R&quot;)) {</span>
<span class="fc" id="L193">            this.currentBoard[column][row] = &quot; &quot;;</span>
<span class="fc bfc" id="L194" title="All 2 branches covered.">            for(redEnemy i: app.board.redEnemyList){</span>
<span class="pc bpc" id="L195" title="1 of 4 branches missed.">                if(i.getX() == row &amp;&amp; i.getY() == column){</span>
<span class="fc" id="L196">                    i.isEnemyDead = true;</span>
                }
<span class="fc" id="L198">            }</span>
<span class="fc bfc" id="L199" title="All 2 branches covered.">            app.board.redEnemyList.removeIf(b -&gt; b.isEnemyDead == true);</span>
<span class="fc" id="L200">            killedRedEnemy = true;</span>
<span class="fc" id="L201">            return true;</span>
        }
<span class="fc" id="L203">        return false;</span>

    }

    public boolean getIsAlive(){
<span class="fc" id="L208">        return this.isAlive;</span>
    }

    public boolean getExplosionFinished(){
<span class="fc" id="L212">        return this.explosionFinished;</span>
    }

    public String[][] getBoard(){
<span class="fc" id="L216">        return this.currentBoard;</span>
    }


}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>