<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Bomb.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Demolition</a> &gt; <a href="index.source.html" class="el_package">demolition</a> &gt; <span class="el_source">Bomb.java</span></div><h1>Bomb.java</h1><pre class="source lang-java linenums">package demolition;

import processing.core.PImage;
import processing.core.PApplet;
import java.util.Arrays;

public class Bomb extends GameObject {
    private String[][] currentBoard;
<span class="fc" id="L9">    private PImage[] bombSprite = new PImage[8];</span>
<span class="fc" id="L10">    private PImage[] explosionSprite = new PImage[7];</span>
<span class="fc" id="L11">    private int[] explodablePath = {0, 0, 0, 0};</span>
    boolean explosionFinished;
    int timerSprite;
    private int currentSprite;
    private boolean isAlive;
<span class="fc" id="L16">    boolean killedPlayer = false;</span>
<span class="fc" id="L17">    boolean killedYellowEnemy = false;</span>
<span class="fc" id="L18">    boolean killedRedEnemy = false;</span>
<span class="fc" id="L19">    boolean brokenWallTF = false;</span>


    public Bomb(int x, int y, PApplet app, String[][] currentBoard){
<span class="fc" id="L23">        super(x, y, app);</span>
<span class="fc" id="L24">        this.currentBoard = currentBoard;</span>

<span class="fc" id="L26">        this.bombSprite[0] = app.loadImage(&quot;src/main/resources/bomb/bomb1.png&quot;);</span>
<span class="fc" id="L27">        this.bombSprite[1] = app.loadImage(&quot;src/main/resources/bomb/bomb2.png&quot;);</span>
<span class="fc" id="L28">        this.bombSprite[2] = app.loadImage(&quot;src/main/resources/bomb/bomb3.png&quot;);</span>
<span class="fc" id="L29">        this.bombSprite[3] = app.loadImage(&quot;src/main/resources/bomb/bomb4.png&quot;);</span>
<span class="fc" id="L30">        this.bombSprite[4] = app.loadImage(&quot;src/main/resources/bomb/bomb5.png&quot;);</span>
<span class="fc" id="L31">        this.bombSprite[5] = app.loadImage(&quot;src/main/resources/bomb/bomb6.png&quot;);</span>
<span class="fc" id="L32">        this.bombSprite[6] = app.loadImage(&quot;src/main/resources/bomb/bomb7.png&quot;);</span>
<span class="fc" id="L33">        this.bombSprite[7] = app.loadImage(&quot;src/main/resources/bomb/bomb8.png&quot;);</span>

        
<span class="fc" id="L36">        this.explosionSprite[0] = app.loadImage(&quot;src/main/resources/explosion/centre.png&quot;);</span>
<span class="fc" id="L37">        this.explosionSprite[1] = app.loadImage(&quot;src/main/resources/explosion/horizontal.png&quot;);</span>
<span class="fc" id="L38">        this.explosionSprite[2] = app.loadImage(&quot;src/main/resources/explosion/vertical.png&quot;);</span>
<span class="fc" id="L39">        this.explosionSprite[3] = app.loadImage(&quot;src/main/resources/explosion/end_top.png&quot;);</span>
<span class="fc" id="L40">        this.explosionSprite[4] = app.loadImage(&quot;src/main/resources/explosion/end_right.png&quot;);</span>
<span class="fc" id="L41">        this.explosionSprite[5] = app.loadImage(&quot;src/main/resources/explosion/end_bottom.png&quot;);</span>
<span class="fc" id="L42">        this.explosionSprite[6] = app.loadImage(&quot;src/main/resources/explosion/end_left.png&quot;);</span>

<span class="fc" id="L44">        this.currentSprite = 0;</span>
<span class="fc" id="L45">        this.timerSprite = 0;</span>
<span class="fc" id="L46">        this.isAlive = true;</span>
<span class="fc" id="L47">        this.explosionFinished = false;</span>
<span class="fc" id="L48">        setCanExplodePath();</span>
<span class="fc" id="L49">    }</span>

    public void setCanExplodePath(){
<span class="pc bpc" id="L52" title="1 of 2 branches missed.">        if(this.currentBoard[y][x+1].equals(&quot;W&quot;)){</span>
            ;
        }//Right
<span class="fc bfc" id="L55" title="All 2 branches covered.">        else if(this.currentBoard[y][x+1].matches(&quot; |R|Y|P&quot;)){</span>
<span class="fc" id="L56">            explodablePath[3] ++;</span>
<span class="fc bfc" id="L57" title="All 2 branches covered.">            if(this.currentBoard[y][x+2].matches(&quot; |R|Y|P|B&quot;)){</span>
<span class="fc" id="L58">                explodablePath[3] ++;</span>
            }
        }
<span class="pc bpc" id="L61" title="1 of 2 branches missed.">        else if(this.currentBoard[y][x+1].equals(&quot;B&quot;)){</span>
<span class="fc" id="L62">                explodablePath[3] += 3;</span>
            }
        //Left
<span class="pc bpc" id="L65" title="1 of 2 branches missed.">        if(this.currentBoard[y][x-1].equals(&quot;W&quot;)){</span>
            ;
        }
<span class="fc bfc" id="L68" title="All 2 branches covered.">        else if(this.currentBoard[y][x-1].matches(&quot; |R|Y|P&quot;)){</span>
<span class="fc" id="L69">            explodablePath[0] ++;</span>
<span class="fc bfc" id="L70" title="All 2 branches covered.">            if(this.currentBoard[y][x-2].matches(&quot; |R|Y|P|B&quot;)){</span>
<span class="fc" id="L71">                explodablePath[0] ++;</span>
            }
        }
<span class="fc bfc" id="L74" title="All 2 branches covered.">        else if(this.currentBoard[y][x-1].equals(&quot;B&quot;)){</span>
<span class="fc" id="L75">                explodablePath[0] += 3;</span>
            }
        //DOWN
<span class="pc bpc" id="L78" title="1 of 2 branches missed.">        if(this.currentBoard[y+1][x].equals(&quot;W&quot;)){</span>
            ;
        }
<span class="pc bpc" id="L81" title="1 of 2 branches missed.">        else if(this.currentBoard[y+1][x].matches(&quot; |R|Y|P&quot;)){</span>
<span class="fc" id="L82">            explodablePath[2] ++;</span>
<span class="fc bfc" id="L83" title="All 2 branches covered.">            if(this.currentBoard[y+2][x].matches(&quot; |R|Y|P|B&quot;)){</span>
<span class="fc" id="L84">                explodablePath[2] ++;</span>
            }
        }
<span class="nc bnc" id="L87" title="All 2 branches missed.">        else if(this.currentBoard[y+1][x].equals(&quot;B&quot;)){</span>
<span class="nc" id="L88">                explodablePath[2] += 3;</span>
            }
        //UP
<span class="fc bfc" id="L91" title="All 2 branches covered.">        if(this.currentBoard[y-1][x].equals(&quot;W&quot;)){</span>
            ;
        }
<span class="pc bpc" id="L94" title="1 of 2 branches missed.">        else if(this.currentBoard[y-1][x].matches(&quot; |R|Y|P&quot;)){</span>
<span class="fc" id="L95">            explodablePath[1] ++;</span>
<span class="fc bfc" id="L96" title="All 2 branches covered.">            if(this.currentBoard[y-2][x].matches(&quot; |R|Y|P|B&quot;)){</span>
<span class="fc" id="L97">                explodablePath[1] ++;</span>
            }
        }
<span class="nc bnc" id="L100" title="All 2 branches missed.">        else if(this.currentBoard[y-1][x].equals(&quot;B&quot;)){</span>
<span class="nc" id="L101">                explodablePath[1] += 3;</span>
            }
        
<span class="fc" id="L104">        this.explodablePath = explodablePath;</span>
<span class="fc" id="L105">    }</span>
    
    public void drawExplosion(PApplet app) {//Left
<span class="fc" id="L108">        app.image(explosionSprite[0], this.x*32, this.y*32+64);</span>
<span class="pc bpc" id="L109" title="2 of 4 branches missed.">        if (explodablePath[0] == 1 || explodablePath[0] == 3) app.image(explosionSprite[6], this.x*32-32, this.y*32+64); //Left Close</span>
<span class="fc bfc" id="L110" title="All 2 branches covered.">        else if (explodablePath[0] == 2) {//Left Far</span>
<span class="fc" id="L111">            app.image(explosionSprite[1], this.x*32-32, this.y*32+64);</span>
<span class="fc" id="L112">            app.image(explosionSprite[6], this.x*32-64, this.y*32+64);</span>
        }
        //UP
<span class="pc bpc" id="L115" title="2 of 4 branches missed.">        if (explodablePath[1] == 1 || explodablePath[1] == 3) app.image(explosionSprite[3], this.x*32, this.y*32+64-32);</span>
<span class="fc bfc" id="L116" title="All 2 branches covered.">        else if (explodablePath[1] == 2) {</span>
<span class="fc" id="L117">            app.image(explosionSprite[2], this.x*32, this.y*32+64-32);</span>
<span class="fc" id="L118">            app.image(explosionSprite[3], this.x*32, this.y*32+64-64);</span>
        }//DOWN
<span class="pc bpc" id="L120" title="2 of 4 branches missed.">        if (explodablePath[2] == 1 || explodablePath[2] == 3) app.image(explosionSprite[5], this.x*32, this.y*32+64+32);</span>
<span class="pc bpc" id="L121" title="1 of 2 branches missed.">        else if (explodablePath[2] == 2) {</span>
<span class="fc" id="L122">            app.image(explosionSprite[2], this.x*32, this.y*32+32+64);</span>
<span class="fc" id="L123">            app.image(explosionSprite[5], this.x*32, this.y*32+64+64);</span>
        }//RIGHT
<span class="pc bpc" id="L125" title="2 of 4 branches missed.">        if (explodablePath[3] == 1 || explodablePath[3] == 3) app.image(explosionSprite[4], this.x*32+32, this.y*32+64);</span>
<span class="pc bpc" id="L126" title="1 of 2 branches missed.">        else if (explodablePath[3] == 2) {</span>
<span class="fc" id="L127">            app.image(explosionSprite[1], this.x*32+32, this.y*32+64);</span>
<span class="fc" id="L128">            app.image(explosionSprite[4], this.x*32+64, this.y*32+64);</span>
        }
<span class="fc" id="L130">        timerSprite += 1;</span>
<span class="fc bfc" id="L131" title="All 2 branches covered.">        if (timerSprite == 30) {</span>
<span class="fc" id="L132">            this.explosionFinished = true;</span>
        }
<span class="fc" id="L134">    }</span>

    public void draw(PApplet app) {
<span class="fc" id="L137">        app.image(bombSprite[currentSprite], this.x*32, this.y*32+64);</span>
<span class="fc" id="L138">        timerSprite += 1;</span>

<span class="fc bfc" id="L140" title="All 2 branches covered.">        if(timerSprite == 15) {</span>
<span class="fc" id="L141">            timerSprite = 0;</span>
<span class="fc" id="L142">            currentSprite += 1;</span>
<span class="fc bfc" id="L143" title="All 2 branches covered.">            if (currentSprite &gt; 7) {</span>
<span class="fc" id="L144">                currentSprite = 0;</span>
<span class="fc" id="L145">                this.isAlive = false;</span>
<span class="fc" id="L146">                timerSprite = 0;</span>
            }
        }

<span class="fc" id="L150">    }</span>

    public void explosion(App app) {
        //Left
<span class="fc bfc" id="L154" title="All 2 branches covered.">      if (explode(this.x-1, this.y, app)) </span>
<span class="fc" id="L155">            explode(this.x-2, this.y, app);</span>
      //Down
<span class="pc bpc" id="L157" title="1 of 2 branches missed.">      if (explode(this.x, this.y+1, app))</span>
<span class="fc" id="L158">            explode(this.x, this.y+2, app);</span>
      //Right
<span class="fc bfc" id="L160" title="All 2 branches covered.">      if (explode(this.x+1, this.y, app)) </span>
<span class="fc" id="L161">            explode(this.x+2, this.y, app);</span>
      //Up
<span class="fc bfc" id="L163" title="All 2 branches covered.">      if (explode(this.x, this.y-1, app)) </span>
<span class="fc" id="L164">            explode(this.x, this.y-2, app);</span>
            
<span class="pc bpc" id="L166" title="1 of 2 branches missed.">      if (explode(this.x, this.y, app));</span>
<span class="fc" id="L167">    }</span>

    public boolean explode(int row, int column, App app) {
<span class="fc" id="L170">        String tile = app.currentBoard[column][row];</span>

<span class="fc bfc" id="L172" title="All 2 branches covered.">        if (tile.equals(&quot; &quot;)) {</span>
<span class="fc" id="L173">          return true;</span>
<span class="fc bfc" id="L174" title="All 2 branches covered.">        } else if (tile.equals(&quot;B&quot;)) {</span>
<span class="fc" id="L175">            this.currentBoard[column][row] = &quot; &quot;;</span>
<span class="fc" id="L176">            return false;</span>

<span class="fc bfc" id="L178" title="All 2 branches covered.">        } else if (tile.equals(&quot;P&quot;)) {</span>
<span class="fc" id="L179">            killedPlayer = true;</span>
<span class="fc" id="L180">            return true;</span>

<span class="fc bfc" id="L182" title="All 2 branches covered.">        } else if (tile.equals(&quot;Y&quot;)) {</span>
<span class="fc" id="L183">            this.currentBoard[column][row] = &quot; &quot;;</span>
<span class="fc bfc" id="L184" title="All 2 branches covered.">            for(yellowEnemy i: app.board.yellowEnemyList){</span>
<span class="pc bpc" id="L185" title="3 of 4 branches missed.">                if(i.getX() == row &amp;&amp; i.getY() == column){</span>
<span class="nc" id="L186">                    i.isEnemyDead = true;</span>
                }
<span class="fc" id="L188">            }</span>
<span class="pc bpc" id="L189" title="1 of 2 branches missed.">            app.board.yellowEnemyList.removeIf(b -&gt; b.isEnemyDead == true);</span>
<span class="fc" id="L190">            killedYellowEnemy = true;</span>
<span class="fc" id="L191">            return true;</span>

<span class="fc bfc" id="L193" title="All 2 branches covered.">        } else if (tile.equals(&quot;R&quot;)) {</span>
<span class="fc" id="L194">            this.currentBoard[column][row] = &quot; &quot;;</span>
<span class="fc bfc" id="L195" title="All 2 branches covered.">            for(redEnemy i: app.board.redEnemyList){</span>
<span class="pc bpc" id="L196" title="1 of 4 branches missed.">                if(i.getX() == row &amp;&amp; i.getY() == column){</span>
<span class="fc" id="L197">                    i.isEnemyDead = true;</span>
                }
<span class="fc" id="L199">            }</span>
<span class="fc bfc" id="L200" title="All 2 branches covered.">            app.board.redEnemyList.removeIf(b -&gt; b.isEnemyDead == true);</span>
<span class="fc" id="L201">            killedRedEnemy = true;</span>
<span class="fc" id="L202">            return true;</span>
        }
<span class="fc" id="L204">        return false;</span>

    }

    public boolean getIsAlive(){
<span class="fc" id="L209">        return this.isAlive;</span>
    }

    public boolean getExplosionFinished(){
<span class="fc" id="L213">        return this.explosionFinished;</span>
    }

    public String[][] getBoard(){
<span class="fc" id="L217">        return this.currentBoard;</span>
    }

    public int getCurrentSprite(){
<span class="fc" id="L221">        return this.currentSprite;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>